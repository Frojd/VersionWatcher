service: versionwatcher

provider:
    name: aws
    runtime: nodejs4.3
    profile: versionwatcher
    stage: stage
    region: eu-west-1

functions:
    tracker-wp:
        handler: trackerWP.handler
        description: Track Wordpress dependencies
        events:
            - http:
                path: tracker/wp
                method: post
    trackNode:
        handler: trackers.node
        description: Track Node.js dependencies
        events: # The Events that trigger this Function
            - http:
                path: tracker/node # Path for this endpoint
                method: post # HTTP method for this endpoint
resources:
  Resources:
    DynamoDBIamPolicy:
      Type: AWS::IAM::Policy
      Properties:
        PolicyName: lambda-dynamodb
        PolicyDocument:
          Version: '2012-10-17'
          Statement:
            - Effect: Allow
              Action:
                - dynamodb:PutItem
              Resource: arn:aws:dynamodb:*:*:table/VersionWatcher
        Roles:
          - Ref: IamRoleLambdaExecution
